function makeExtraLine(t,a){for(var e=[],n={},r={numberOfDocuments:0},s={numberOfDocuments:a[0].numberOfDocuments},o=0;o<a.length;o++)o%7===0?(n={},n.startDate=new Date(a[o].startDate),n.startDate.setTime(n.startDate.getTime()+6e4*Math.abs(n.startDate.getTimezoneOffset())),n.total=parseInt(a[o].numberOfDocuments),n.count=1):(n.total=n.total+parseInt(a[o].numberOfDocuments),n.count=n.count+1,n.endDate=new Date(a[o].endDate),n.endDate.setTime(n.endDate.getTime()+6e4*Math.abs(n.endDate.getTimezoneOffset()))),(o+1)%7===0&&(n.numberOfDocuments=n.total/n.count,n.numberOfDocuments>=r.numberOfDocuments&&(r=n),n.numberOfDocuments<=s.numberOfDocuments&&(s=n),e.push(n),n={});n.total&&(n.numberOfDocuments=n.total/n.count,e.push(n));var i=$(t).innerWidth()-20,m=i+"px",u=150,c=u+"px",d={top:10,bottom:25,left:15,right:35},p=d3.time.scale().range([d.left,i-d.right]),l=d3.scale.linear().range([d.top,u-d.bottom]),D=d3.svg.axis().scale(p).orient("bottom").tickValues([e[0].startDate,e[parseInt((e.length-1)/2)].startDate,e[e.length-1].startDate]).tickFormat(d3.time.format("%b '%y"));p.domain(d3.extent(e,function(t){return t.startDate})),l.domain([d3.max(e,function(t){return parseInt(t.numberOfDocuments)}),0]);var f=d3.select(t+" .viz-content").append("svg").attr("width",m).attr("height",c),b=d3.svg.line().x(function(t){return p(t.startDate)}).y(function(t){return parseInt(l(parseInt(t.numberOfDocuments)))}),y=f.append("g").attr("class","max-min-point"),x=f.append("g").attr("class","max-min-point"),g=f.append("path").attr("class","line").attr("d",b(e)),O=g.node().getTotalLength();g.attr("stroke-dasharray",O+" "+O).attr("stroke-dashoffset",O).transition().duration(2e3).delay(750).ease("sin-out").attr("stroke-dashoffset",0),f.append("g").attr("class","x axis").attr("transform","translate(0,"+(u-d.bottom)+")").call(D);var h=f.append("g").attr("class","first-date").append("circle").attr("r",3).attr("cx",p(e[0].startDate)).attr("cy",l(e[0].numberOfDocuments)).attr("opacity",0).transition().duration(1500).attr("opacity",1),v=f.append("g").attr("class","first-date").append("circle").attr("r",0).attr("cx",p(e[e.length-1].startDate)).attr("cy",l(e[e.length-1].numberOfDocuments)).attr("opacity",0).transition().duration(1200).delay(2500).ease("elastic").attr("opacity",1).attr("r",6).transition().duration(2e3).ease("bounce").attr("r",3);y.append("line").attr("x1",p(r.startDate)).attr("x2",p(r.startDate)).attr("y1",u-d.bottom).attr("y2",u-d.bottom).transition().delay(900).duration(1e3).attr("y2",l(r.numberOfDocuments)+2),y.append("text").text(r.numberOfDocuments.toFixed(0)+" posts").attr("text-anchor","end").attr("x",p(r.startDate)-5).attr("y",l(r.numberOfDocuments)+10).style("opacity",0).transition().delay(1700).duration(300).style("opacity",1),x.append("line").attr("x1",p(s.startDate)).attr("x2",p(s.startDate)).attr("y1",u-d.bottom).attr("y2",u-d.bottom).transition().delay(1900).duration(1e3).attr("y2",l(s.numberOfDocuments)),x.append("text").text(s.numberOfDocuments.toFixed(0)+" posts").attr("text-anchor","end").attr("x",p(s.startDate)-4).attr("y",l(s.numberOfDocuments)+10).style("opacity",0).transition().delay(2400).duration(300).style("opacity",1)}